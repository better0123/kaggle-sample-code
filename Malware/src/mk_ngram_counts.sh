
# calculate ngram frequencies from disassembler output in *.asm files
# creates one file per class label (1..9)

NGRAM_LENGTH=2
NGRAM_DIR=../data/ngrams

LABELED_DIR=../data/train

# Create ngram count files for the training set.

for label in 1 2 3 4 5 6 7 8 9
do
    echo `date`  Processing training ngrams for label ${label} 
    #cat ${LABELED_DIR}/${label}/*.asm | \                          # TODO change back after testing 
    cat `ls ${LABELED_DIR}/${label}/*.asm | head -5` | \
    ./ngramer ${NGRAM_LENGTH} | \
    sort | uniq -c |  sort -nr \
    > ${NGRAM_DIR}/${label}.txt 
done
