
malwaredir=/home/chefele/kaggle/Malware/data/train_small
destdir=/home/chefele/kaggle/Malware/data/features_small

for bytengramlen in 1 2 3 4 5 6 7 8 
do
    for bytehashnorm in 0 1 2 
    do
        for bytehashsigned in "--bytehashsigned" ""
        do
            prefix=feat-ngram-${bytengramlen}-norm-${bytehashnorm}${bytehashsigned}
            featurefile=${destdir}/${prefix}.csv
            logfile=${destdir}/${prefix}.log
            
            echo `date` ${featurefile}

            stdbuf -o0 python features.py \
            --asmhashdim 1 \
            --bytehashdim 997 \
            --bytengramlen ${bytengramlen}  \
            --asmhashnorm 0 \
            --bytehashnorm ${bytehashnorm} \
            --asmhashsigned  \
            ${bytehashsigned} \
            --blackliststrings "noblacklist" \
            --nrandf 10 \
            ${malwaredir} ${featurefile} > ${logfile} & 

        done
    done
    wait
done


